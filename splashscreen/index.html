<!DOCTYPE html>
<html>
<body>

<script>
	
</script>

	<img src="./website_logo_Vanilla Server Recreation logoxcf.png">
   <h2>7 Days To Die Vanilla Public Server Donation</h2>
   <img height="100px" src="./output-onlinegiftools.gif">
   <p id="countdown"><strong id="seconds">4</strong> seconds remaining</p>
   <p id="result"></p>
   <p>You are about to donate to Vanilla Public Server. Thank you!</p>
   <noscript>
	<button onclick="redirect()">Click to Redirect to Donation page.</button>
   </noscript>

   <script>
		// Donations link information extraction
		// Full example: 
	        // https://publicdomain-nocopyright.github.io/7DTD-Public-Vanilla-Server/splashscreen/index.html?amount=$5&reference=76400&in-game=true
	   
		// Check for in-game donation
	   	// Example:  https://publicdomain-nocopyright.github.io/7DTD-Public-Vanilla-Server/splashscreen/index.html?in-game=true
		let urlParamsIngame = new URLSearchParams(window.location.search);
		let IsInGameDonation = urlParamsIngame.get('in-game');
	   	console.log("Is ingame donation: " + IsInGameDonation);

	   	// Check if Open Collective Donation
	   	// Example: https://publicdomain-nocopyright.github.io/7DTD-Public-Vanilla-Server/splashscreen/index.html?amount=$5&reference=76400
		let IsOpenCollectivePlatform = false;
		
		let urlParams = new URLSearchParams(window.location.search);
		
		
		// Example: ?amount=$5
		let amount = urlParams.get('amount');
		
		// Example: ?reference=76400
		let reference = urlParams.get('reference');
		
		console.log("Open Collective Amount: " + amount);
		console.log("Open Collective Reference: " + reference);
		

		
		
		function convertCurrency(input) {
		  const currencyMap = {
			'$': 'usd',
			'â‚¬': 'eur',
		  };

		  const symbol = input[0];
		  const amount = input.slice(1);

		  if (currencyMap[symbol]) {
			return amount + currencyMap[symbol];
		  } else {
			return input; // Return unchanged if the symbol is not found in the map
		  }
		}

		if (amount !== null && reference !== null) {
			console.log("Open Collective enabled.");

			IsOpenCollectivePlatform = true;
			var donation_amount_converted_to_revolut_currency_format = convertCurrency(amount);  // Output: 1234dol or 1234eur for revolut platform link structure.
			console.log(donation_amount_converted_to_revolut_currency_format);
		} else {console.log("Open Collective disabled.");}
		

   
		var el = document.getElementById('seconds'),
			total = el.innerHTML,
			timeinterval = setInterval(function () {
				total = --total;
				el.textContent = total;
				if (total <= 0) {
					clearInterval(timeinterval);

					
					if (IsOpenCollectivePlatform){
						if (IsInGameDonation){ var InGameDonationNotice = " By using in-game Donation Button";}
						document.location.href = 'https://revolut.me/boqsc/' + donation_amount_converted_to_revolut_currency_format + '/7 days to die vanilla public server donation, as Open Collective with reference: '+ reference + InGameDonationNotice +'/';
					
					} 
					
					else if (IsInGameDonation){
						document.location.href = 'https://revolut.me/boqsc/1eur/7 days to die vanilla public server donation, as <anonymous> in-game./';
					
					} 
					
					else {
						document.location.href = 'https://revolut.me/boqsc/1eur/7 days to die vanilla public server donation, as <anonymous>/';
					}
					// do redirect or something ~ window.location = '//google.de';
				}
			}, 1000);
		   
   
   
   </script>

   <style> 
	body {
		font-family: "Open Sans", Arial, Helvetica, sans-serif;
		background-image: url('./website_background_Vanilla Server Recreation logoxcf.png');
  background-attachment: fixed;
   background-position: center center;
   background-size: cover; 
	}
	
	p, h2 {   text-align: center;      color: #e8e8e8;
    text-shadow: #222222 1px 0 10px;}
   
   
   img { 
	display: block;
     margin-left: auto;
  margin-right: auto;
  }
  
 
			@import url('https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap')
</style>
  
   </style>
   
   
</body>
</html>
