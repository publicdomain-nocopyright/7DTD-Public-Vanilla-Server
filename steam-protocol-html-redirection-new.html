<!DOCTYPE html>
<html>
  <head>
    <title>Redirecting to Steam</title>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var domain = "vanillaserver.eu";

        // Fetch IP address using DNS resolution
        window.fetch(`https://dns.google/resolve?name=${domain}&type=A`)
          .then(response => response.json())
          .then(data => {
            if (data.Status === 0 && data.Answer) {
              var ip = data.Answer[0].data;
              // Open the redirection in a new popup window
              var newWindow = window.open(`steam://connect/${ip}:26900`, '_blank', 'width=600,height=400');

              // Attempt to close the popup window after the redirect
              if (newWindow) {
                setTimeout(() => {
                  newWindow.close();
                }, 1000); // Delay for a second to allow redirection
              }
            } else {
              console.error("Failed to resolve IP address for the domain.");
            }
          })
          .catch(error => {
            console.error('Error:', error);
          });
      });
    </script>
  </head>
  <body>
  </body>
</html>
